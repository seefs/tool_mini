<!DOCTYPE html>
<html>
<body>

  <img id="scream" src="test.png" alt="The Scream" width="22" height="17">

  <canvas id="myCanvas" width="22" height="17" style="border:1px solid #d3d3d3;">
    Your browser does not support the HTML5 canvas tag.
  </canvas>
  
	<input type=button value="Write" onclick="Write2Text()">
	
	<input type=button value="copy" onclick="copy()">
	
	
	<br/>
	<label id="img_w">w</label>
	<br/>
	<label id="img_h">h</label>
	<br/>
	<label id="img_len">len</label>
	<br/>
	
	<label id="lab1">txt</label>
	
	
  <script>

    document.getElementById("scream").onload = function () {
		    var c = document.getElementById("myCanvas");
		    var ctx = c.getContext("2d");
		    var img = document.getElementById("scream");
			
			var imgData; 
			
			document.getElementById("img_w").innerHTML = c.width;
			document.getElementById("img_h").innerHTML = c.height;
			document.getElementById("lab1").innerHTML = "xx1";
			
		    ctx.drawImage(img, 0, 0);
		    imgData = ctx.getImageData(0, 0, c.width, c.height);
			
			document.getElementById("lab1").innerHTML = "xx2";
			document.getElementById("img_len").innerHTML = imgData.data.length;
			
		    // invert colors
		    for (var i = 0; i < imgData.data.length; i += 4) {
		        imgData.data[i] = 255 - imgData.data[i];
		        imgData.data[i + 1] = 255 - imgData.data[i + 1];
		        imgData.data[i + 2] = 255 - imgData.data[i + 2];
		        imgData.data[i + 3] = 255;
		    }
		    ctx.putImageData(imgData, 0, 0);


			
		};

		
	var arr = new Array();
	arr[0] = [0,"name0","value0"];
	arr[1] = [1,"name1","value1"];
	
	function Write2Text()
	{
		var txt = document.getElementById("lab1").innerHTML;

	    var c = document.getElementById("myCanvas");
	    var ctx = c.getContext("2d");
	    var img = document.getElementById("scream");
		
		document.getElementById("lab1").innerHTML = "aaa";
		
	    ctx.drawImage(img, 0, 0);
	     imgData = ctx.getImageData(0, 0, c.width, c.height);
	    // invert colors
	    for (var i = 0; i < imgData.data.length; i += 4) {
	        imgData.data[i] = 255 - imgData.data[i];
	        imgData.data[i + 1] = 255 - imgData.data[i + 1];
	        imgData.data[i + 2] = 255 - imgData.data[i + 2];
	        imgData.data[i + 3] = 255;
	    }
	    ctx.putImageData(imgData, 0, 0);
			
		document.getElementById("lab1").innerHTML = "bbb";
		document.getElementById("lab1").innerHTML = "xxx" + imgData.data[0];
		
	}
	
	function copy()
	{
	    var c = document.getElementById("myCanvas");
	    var ctx = c.getContext("2d");
	    var img = document.getElementById("scream");
	    var imgctx = img.getContext("2d");
			
		var imgData = imgctx.getImageData(5,5,10,10);
		ctx.putImageData(imgData,0,0);
	}


  </script>

</body>
</html>